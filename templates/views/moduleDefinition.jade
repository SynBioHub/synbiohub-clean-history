
extends ../layouts/topLevel.jade

block topLevelPreview
    if meta.displayList
        div.design-container
            div.col-md-12.text-center
            div#design

block topLevelPropertyTable

    if meta.models.length > 0 
        tr
            td 
                | Model
                a(href='http://sbols.org/v2#Model',title='Learn more about Models') 
                    span.fa.fa-info-circle
            td
                for model in meta.models
                    if (model.url)
                        a(href=model.url) #{model.id}
                    else
                        a(href=model.toString()) #{model.toString()}
                    br
            td(nowrap="nowrap") 
                for model in meta.models
                    if (model.version)
                        != 'Version '+model.version
                    br

block topLevelPanels
                if meta.modules.length > 0
                    .panel.panel-default
                        .panel-heading
                            h4.panel-title
                                a.accordion-toggle(data-toggle='collapse', href='#collapseModules', class='collapsed')
                                    | <b>Modules</b>
                        #collapseModules.panel-collapse.collapse
                            .panel-body
                                table.table.table-striped.entry-detail-table
                                    tr
                                        td 
                                            | Instance : 
                                            a(href='http://sbols.org/v2#Module',title='Learn more about Modules') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | Definition 
                                            a(href='http://sbols.org/v2#definition',title='Learn more about definitions') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | (
                                            | MapsTos 
                                            a(href='http://sbols.org/v2#MapsTo',title='Learn more about MapsTos') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | )
                                    tr
                                        td
                                            for module in meta.modules
                                                a(href=module.url) #{module.name}
                                                | &nbsp;
                                                | :
                                                | &nbsp;
                                                a(href=module.definition.url) #{module.definition.name}
                                                if module.mapsTos.length > 0
                                                  | (
                                                  - var first = true
                                                  for mapsTo in module.mapsTos
                                                    if !first
                                                      | , 
                                                    else
                                                      - first = false
                                                    a(href=mapsTo.remoteMapsTo.url) #{mapsTo.remoteMapsTo.name}
                                                    a(href=mapsTo.url) #{' => '}
                                                    a(href=mapsTo.local.url) #{mapsTo.local.name}
                                                  | )
                                                br

                if meta.functionalComponents.length > 0
                    .panel.panel-default
                        .panel-heading
                            h4.panel-title
                                a.accordion-toggle(data-toggle='collapse', href='#collapseFunctionalComponents', class='collapsed')
                                    | <b>Functional Components</b>
                        #collapseFunctionalComponents.panel-collapse.collapse
                            .panel-body
                                table.table.table-striped.entry-detail-table
                                    tr
                                        td 
                                            | Access
                                            a(href='http://sbols.org/v2#access',title='Learn more about access') 
                                                span.fa.fa-info-circle
                                            | 
                                            | /
                                            | 
                                            | Direction
                                            a(href='http://sbols.org/v2#direction',title='Learn more about direction') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | Instance
                                            a(href='http://sbols.org/v2#FunctionalComponent',title='Learn more about Functional Components') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | :
                                            | &nbsp;
                                            | Definition
                                            a(href='http://sbols.org/v2#definition',title='Learn more about definitions') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | (
                                            | MapsTos 
                                            a(href='http://sbols.org/v2#MapsTo',title='Learn more about MapsTos') 
                                                span.fa.fa-info-circle
                                            | &nbsp;
                                            | )
                                    tr
                                        td
                                            for functionalComponent in meta.functionalComponents
                                                != functionalComponent.access.id
                                                a(href=functionalComponent.access.url,title='Learn more about this access type') 
                                                    span.fa.fa-info-circle
                                                | 
                                                | /
                                                | 
                                                != functionalComponent.direction.id
                                                a(href=functionalComponent.direction.url,title='Learn more about this direction type') 
                                                    span.fa.fa-info-circle
                                                | &nbsp;
                                                a(href=functionalComponent.url) #{functionalComponent.name}
                                                | &nbsp;
                                                | :
                                                | &nbsp;
                                                a(href=functionalComponent.definition.url) #{functionalComponent.definition.name}
                                                if functionalComponent.mapsTos.length > 0
                                                  | (
                                                  - var first = true
                                                  for mapsTo in functionalComponent.mapsTos
                                                    if !first
                                                      | , 
                                                    else
                                                      - first = false
                                                    a(href=mapsTo.remoteMapsTo.url) #{mapsTo.remoteMapsTo.name}
                                                    a(href=mapsTo.url) #{' => '}
                                                    a(href=mapsTo.local.url) #{mapsTo.local.name}
                                                  | )
                                                br

                if meta.interactions.length > 0
                    .panel.panel-default
                        .panel-heading
                            h4.panel-title
                                a.accordion-toggle(data-toggle='collapse', href='#collapseInteractions', class='collapsed')
                                    | <b>Interactions</b>
                        #collapseInteractions.panel-collapse.collapse
                            .panel-body
                                table.table.table-striped.entry-detail-table
                                    tr
                                        td 
                                            | Interaction
                                            a(href='http://sbols.org/v2#Interaction',title='Learn more about Interactions') 
                                                span.fa.fa-info-circle
                                            | 
                                            | /
                                            | 
                                            | Participation
                                            a(href='http://sbols.org/v2#Participation',title='Learn more about Participations') 
                                                span.fa.fa-info-circle
                                        td 
                                            | Participant Definition
                                            a(href='http://sbols.org/v2#definition',title='Learn more about participant definitions') 
                                                span.fa.fa-info-circle
                                        td 
                                            | Type
                                            a(href='http://sbols.org/v2#type',title='Learn more about types') 
                                                span.fa.fa-info-circle
                                            | 
                                            | /
                                            | 
                                            | Role
                                            a(href='http://sbols.org/v2#role',title='Learn more about roles') 
                                                span.fa.fa-info-circle
                                    for interaction in meta.interactions
                                        tr
                                            td 
                                                a(href=interaction.url, title=interaction.url) #{interaction.name}
                                            td
                                            td
                                                != interaction.type.typeStr
                                                | 
                                                a(href=interaction.type.typeURL,title='Learn more about this type')
                                                     span.fa.fa-info-circle
                                                br
                                        if interaction.participations.length > 0
                                            for participation in interaction.participations
                                                tr
                                                    td
                                                        | |--> 
                                                        a(href=participation.url, title=participation.url) #{participation.name}
                                                    td 
                                                        a(href=participation.participant.definition.url, title=participation.participant.definition.url) #{participation.participant.definition.name}
                                                    td
                                                        != participation.role.roleStr 
                                                        | 
                                                        a(href=participation.role.roleURL,title='Learn more about this role')
                                                            span.fa.fa-info-circle
                                                        br
     
            
